# **现代操作系统**

## 1.引论

整个计算机系统=硬件+软件

软件根据操作权限的不同分为**内核态**和**用户态**，用户态涉及某些敏感操作或者I/O操作是需要切换到内核态的。

操作系统对所有硬件资源都有访问权。

在嵌入式系统中，用户态和核心态的概念被模糊化。

抽象是管理复杂性的一个关键。抽象把任务划分为抽象的定义和实现，以及用这些抽象解决问题。

操作系统给程序隐藏了硬件。

操作系统**管理资源**的方式：

- 时间上复用：轮询使用资源
- 空间上复用：每个进程获取一部分资源实现内存分割

总的来说，操作系统是作为机器的一个扩展，同时由扮演了一个资源管理者的角色。

操作系统的历史：

- 一代：真空管和穿孔卡片
- 二代：晶体管和批处理系统，如FMS
- 三代：集成电路和多道程序设计，实现内存分割
- 四代：个人计算机，如mac OS和Windows NT
- 五代：移动计算机，Symbian OS，Android OS，iOS

计算机=处理器CPU+芯片+存储器(L2缓存+RAM+ROM)+磁盘(如固态硬盘)+I/O设备+总线

设备驱动程序装入操作系统有3种途径：

- 1.内核与驱动重新链接，重启系统：如UNIX
- 2.操作系统文件中设置入口，通知文件需要驱动重启系统：如Windows
- 3.操作系统运行时接收新驱动，无需重启：热插拔设备，动态加载

实现输入输出的3种方式：

- 系统调用：用户发出系统调用，内核翻译为对应的过程调用
- 驱动启动设备并让设备在操作完成时发出中断
- 为I/O使用特殊的DMA芯片

PCIe是PCI总线的继承者，使用**串行总线架构**，使用一条数据通路传递所有信息。

即插即用的工作：操作系统自动收集有关I/O设备的信息，集中赋予中断级别和I/O地址，通知每块卡使用的数值。