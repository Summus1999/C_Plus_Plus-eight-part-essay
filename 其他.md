# 其他

## 分布式算法有无了解？

- Paxos：在异步网络中实现多数派共识，容忍节点故障（非拜占庭）。
- Raft：将共识问题拆解为：Leader选举 + 日志复制 + 安全性保证
- ZAB：选择ZXID最大的节点为Leader（ZXID=epoch + 计数器）。Leader生成事务 → 分配ZXID → 广播PROPOSAL->收到多数ACK → 发送COMMIT提交
- PBFT：当主节点疑似故障时，副节点发起视图切换协议。所有消息附带数字签名（防篡改）。防止恶意节点耗尽序列号空间。

## 分布式算法的好处有哪些？

- 并行计算加速处理：分布式算法将大型任务分解为多个子任务，分配到不同节点并行执行，极大缩短计算时间。例如在推荐系统、科学计算等场景中，处理TB/PB级数据时，分布式并行计算效率远超单机系统。
- 水平灵活扩展能适应业务增长：分布式算法天然支持通过添加节点横向扩展系统能力，无需重构核心逻辑。例如电商平台在流量激增时，可快速扩容服务器集群以应对高并发请求
- 故障自动恢复，去中心化抗灾：分布式算法内置冗余机制（如数据副本、心跳检测），部分节点故障时任务自动迁移至健康节点。例如HDFS默认3副本存储，确保数据不丢失；Raft算法通过Leader选举实现服务无缝切换
- 整合闲置资源，降低硬件成本：分布式算法可聚合分散的算力（如边缘设备、个人电脑），形成虚拟计算池。
- 支持复杂一致性模型，实现隐私保护设计：符合强一致性要求，联邦学习等算法允许数据本地处理，仅共享模型参数，避免敏感数据泄露，符合GDPR等合规要求。

## 如何排查C++代码在计算部分的性能瓶颈？

- 宏观定位热点区域
- 微观分析热点函数
- 代码级瓶颈定位
能使用的工具：
- perf
- Hotspot
- VTune
- valgrind内存分析工具

## 局部性原理是啥？

局部性原理（Principle of Locality）是计算机系统中最核心的**性能优化**理论基础，它揭示了程序访问内存的规律性模式。程序在执行过程中倾向于重复访问最近使用过的数据或其邻近数据。

- 时间局部性：如果某个数据被访问，不久的将来它很可能再次被访问
- 空间局部性：如果某个数据被访问，其邻近地址的数据很可能很快被访问

## 如何定位C++内存泄漏问题？C++如何避免内存泄漏问题？

定位手段：

- 使用Valgrind进行内存泄漏的基础检测。
- 使用 ASan 快速定位。
- Valgrind 深度分析。
- Heaptrack 可视化分析。

C++内存泄漏防范手段：

- 尽量使用智能指针，智能指针能够自动管理动态分配的内存，当不再需要时会自动释放，来避免程序员使用裸指针没有释放资源导致的内存泄漏的问题。
- 及时释放不再需要的内存。即使使用了智能指针，也要确保在不再需要内存时及时将其重置或销毁。这可以避免不必要的内存占用，并有助于更早地发现潜在的内存泄漏问题。
- 借助一些内存泄漏监测工具，或者自己对内存使用情况进行跟踪记录，来及时判断程序是否发生了内存泄漏，并且及时修正代码。

## 两将军问题的结论是什么？

两将军问题是分布式系统领域的经典思想实验，揭示了在不可靠通信环境下达成绝对共识的理论不可行性。
结论是不可能实现绝对的可靠，只能实现相对可靠。通过超时重传、​霰弹打鸟和定时重传机制实现尽量的可靠通信。

## gdb的watch是如何实现的？看的是内存地址还是检测值是否变化？

GDB 中的 watch 命令通过**监控指定内存地址的内容变化实现断点触发**，其核心原理分为硬件辅助和软件模拟两种方式。

- 硬件辅助实现：**依赖CPU调试寄存器**，现代处理器（如x86的DR0-DR7寄存器）支持设置内存访问断点，监视地址，watch 将目标变量或表达式的内存地址写入调试寄存器。当出现读写等操作时，触发SIGTRAP异常，GDB捕获该异常并暂停程序，显示变化前后的值。
- 软件模拟：当硬件不支持或寄存器不足时，GDB在每条指令执行后，对比目标地址的当前值与之前快照。

## core dump是什么，如何使用gdb看core dump文件？

Core dump（核心转储）是程序崩溃时操作系统自动生成的磁盘文件，它保存了程序崩溃瞬间的完整内存快照、寄存器状态、函数调用栈等上下文信息，相当于程序“事故现场的黑匣子。无需修改代码或添加日志，直接分析崩溃瞬间状态。

看core dump文件的过程：(需要编译时候带上符号)
先生成core dump文件

```bash
ulimit -c unlimited  # 解除大小限制
```

- 加载 core 文件
- 使用调试命令查看文件
